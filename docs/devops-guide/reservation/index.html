<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Reservation System setup · Jitsi Meet Handbook</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="### Support for a reservation system over REST API"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Reservation System setup · Jitsi Meet Handbook"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jitsi.github.io/handbook/"/><meta property="og:description" content="### Support for a reservation system over REST API"/><meta property="og:image" content="https://jitsi.github.io/handbook/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jitsi.github.io/handbook/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/handbook/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/docusaurus-admonitions.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/handbook/js/scrollSpy.js"></script><link rel="stylesheet" href="/handbook/css/main.css"/><script src="/handbook/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/handbook/"><img class="logo" src="/handbook/img/logo-white.png" alt="Jitsi Meet Handbook"/><h2 class="headerTitleWithLogo">Jitsi Meet Handbook</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/handbook/docs/intro" target="_self">Docs</a></li><li class=""><a href="/handbook/help" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Configuration</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/handbook/docs/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/security">Security</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/faq">FAQ</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Community<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/handbook/docs/community/community-intro">Our community</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/community/community-instances">Community-run instances</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/community/breakout-rooms">Breakout rooms</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/community/third-party-software">Third-party Software</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">User Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-start">Overview</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/supported-browsers">Supported browsers</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-join-jitsi-meeting">Join a Jitsi Meeting</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-start-a-jitsi-meeting">Start a Jitsi Meeting</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-share-a-jitsi-meeting">Share a Jitsi Meeting</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-jitsi-meet-on-mobile">Use Jitsi Meet on Mobile</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-jitsi-meet-for-google-calendar">Jitsi Meet for Google Calendar</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/keyboard-shortcuts">Keyboard shortcuts</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-basic">Basic options</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/user-guide/user-guide-advanced">Advanced options</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developer Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-start">Overview</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-contributing">Contributing Guidelines</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Web</h4><ul><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-web">Start</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-ljm">Modifying lib-jitsi-meet</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-web-integrations">Integrations</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-iframe">IFrame API</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-ljm-api">lib-jitsi-meet API (low level)</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Mobile</h4><ul><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-mobile">Start</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/mobile-feature-flags">Feature flags</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-android-sdk">Android SDK</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/dev-guide/dev-guide-ios-sdk">iOS SDK</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Self-Hosting Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-start">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Deployment</h4><ul><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-quickstart">Debian/Ubuntu server</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-opensuse">openSUSE</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-manual">Manual installation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Configuration</h4><ul><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/secure-domain">Authentication (Secure Domain)</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-scalable">Scalable setup</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/handbook/docs/devops-guide/reservation">Reservation System</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/turn">TURN setup</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/speakerstats">Speaker Stats</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/videosipgw">Video SIP gateway</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/cloud-api">Cloud API</a></li></ul></div><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/devops-guide-videotutorials">Video Tutorials</a></li><li class="navListItem"><a class="navItem" href="/handbook/docs/devops-guide/faq">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/jitsi/handbook/edit/master/docs/devops-guide/reservation.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Reservation System setup</h1></header><article><div><span><h3><a class="anchor" aria-hidden="true" id="support-for-a-reservation-system-over-rest-api"></a><a href="#support-for-a-reservation-system-over-rest-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for a reservation system over REST API</h3>
<p>It is possible to connect to external conference reservation system using
REST API. Before new Jitsi-meet conference is created reservation system will be
queried for room availability. The system is supposed to return positive or
negative response which also contains conference duration. Prosody will enforce
conference duration and if the time limit is exceeded the conference will be
terminated.</p>
<h4><a class="anchor" aria-hidden="true" id="enable-reservation-system"></a><a href="#enable-reservation-system" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enable reservation system</h4>
<p>In order to enable reservation system URL base for REST API endpoint must be
configured. Under the main virtual host in prosody enable module &quot;reservations&quot; and
add the config <code>reservations_api_prefix</code>:</p>
<pre><code class="hljs">VirtualHost <span class="hljs-string">"jitmeet.example.com"</span>
    -- <span class="hljs-built_in">..</span><span class="hljs-built_in">..</span>
    modules_enabled = {
        -- <span class="hljs-built_in">..</span><span class="hljs-built_in">..</span>
        <span class="hljs-string">"reservations"</span>;
    }
    reservations_api_prefix = <span class="hljs-string">"http://reservation.example.com"</span>
</code></pre>
<p>URL base is used to construct request URL. Currently, only <code>'/conference'</code>
endpoint is supported, so all request will go to:</p>
<pre><code class="hljs"><span class="hljs-symbol">http:</span><span class="hljs-comment">//reservation.example.com/conference</span>
</code></pre>
<p>Additional configurations are available:</p>
<ul>
<li>&quot;reservations_api_timeout&quot; to change API call timeouts (defaults to 20 seconds)</li>
<li>&quot;reservations_api_headers&quot; to specify custom HTTP headers included in
all API calls e.g. to provide auth tokens.</li>
<li>&quot;reservations_api_retry_count&quot; to the number of times API call failures are retried (defaults to 3)</li>
<li>&quot;reservations_api_retry_delay&quot; seconds to wait between retries (defaults to 3s)</li>
<li>&quot;reservations_api_should_retry_for_code&quot; to a function that takes an HTTP response code and
returns true if API call should be retried. By default, retries are done for 5XX
responses. Timeouts are never retried, and HTTP call failures are always retried.</li>
</ul>
<pre><code class="hljs">    <span class="hljs-comment">--- The following are all optional</span>
    reservations_api_headers = {
        [<span class="hljs-string">"Authorization"</span>] = <span class="hljs-string">"Bearer TOKEN-237958623045"</span>;
    }
    reservations_api_timeout = <span class="hljs-number">10</span>  <span class="hljs-comment">-- timeout if API does not respond within 10s</span>
    reservations_api_retry_count = <span class="hljs-number">5</span>  <span class="hljs-comment">-- retry up to 5 times</span>
    reservations_api_retry_delay = <span class="hljs-number">1</span>  <span class="hljs-comment">-- wait 1s between retries</span>
    reservations_api_should_retry_for_code = <span class="hljs-keyword">function</span> <span class="hljs-title"></span>(code)
        <span class="hljs-keyword">return</span> <span class="hljs-type">code</span> &gt;= <span class="hljs-number">500</span> <span class="hljs-keyword">or</span> code == <span class="hljs-number">408</span>
    <span class="hljs-keyword">end</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="call-flow"></a><a href="#call-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Call flow</h4>
<h5><a class="anchor" aria-hidden="true" id="notes"></a><a href="#notes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Notes</h5>
<p>All API calls use following date and time format:</p>
<p><code>yyyy-MM-dd'T'HH:mm:ss.SSSX</code> - more info can be found in
<code>SimpleDateFormat</code> <a href="https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html">JavaDoc</a></p>
<h5><a class="anchor" aria-hidden="true" id="conference-allocation"></a><a href="#conference-allocation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conference allocation</h5>
<p>When the first user joins MUC room(Jitsi-meet URL is opened) <code>HTTP POST</code>
request is sent to <code>'/conference'</code> endpoint with the following parameters
included:</p>
<ul>
<li><code>name (string)</code> - short name of the conference room(not full MUC address). If tenant is used the name will be <code>[tenant]roomname</code>.</li>
<li><code>start_time (string)</code> - conference start date and time</li>
<li><code>mail_owner (string)</code> - if authentication system is enabled this field will
contain user's identity. It that case it will not be possible to create new
conference room without authenticating.</li>
</ul>
<p>The payload sent to the endpoint will be encoded as <code>application/x-www-form-urlencoded</code>.</p>
<p>Then reservation system is expected to respond with one of the following
responses:</p>
<h6><a class="anchor" aria-hidden="true" id="http-200-or-201-conference-created-successfully"></a><a href="#http-200-or-201-conference-created-successfully" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP 200 or 201 Conference created successfully</h6>
<p>In HTTP response JSON object is expected. It should contain conference <code>id</code>
assigned by the system and <code>duration</code> measured in seconds. Sample response body:</p>
<pre><code class="hljs">{
  'id': <span class="hljs-number">364758328</span>,
  'name': 'conference<span class="hljs-number">1234</span>',
  'mail_owner': 'user@server.com',
  'start_time': '<span class="hljs-number">2048-04-20</span>T17:55:12.000Z',
  'duration': <span class="hljs-number">900000</span>
}
</code></pre>
<h6><a class="anchor" aria-hidden="true" id="http-409---conference-already-exists"></a><a href="#http-409---conference-already-exists" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP 409 - Conference already exists</h6>
<p>This is to recover from previous failures. If for some reason it was
restarted and will try to create the room again this response informs Prosody
that the conference room exists already. It is expected to contain
<code>conflict_id</code> in JSON response body:</p>
<pre><code class="hljs"><span class="hljs-string">{</span>
  <span class="hljs-attr">'conflict_id':</span> <span class="hljs-number">364758328</span>
<span class="hljs-string">}</span>
</code></pre>
<p>Prosody will use <code>HTTP GET</code> to fetch info about conflicting conference for
given <code>conflict_id</code>. More info about this request in &quot;Reading conference info&quot;
section.</p>
<h6><a class="anchor" aria-hidden="true" id="http-4xx"></a><a href="#http-4xx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP 4xx</h6>
<p>Other response codes will cause conference creation failure. JSON response
can contain <code>message</code> object which will be sent back to the client.</p>
<p>For example <code>user1</code> tries to start new conference by sending
<code>conference</code> IQ to Jicofo. System will reject the request.</p>
<p>Client -&gt; Jicofo:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">iq</span> <span class="hljs-attr">from</span>=<span class="hljs-string">'client1@xmpp.com'</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'jicofo.meet.com'</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'set'</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">conference</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">'http://jitsi.org/protocol/focus'</span> <span class="hljs-attr">room</span>=<span class="hljs-string">'testroom1'</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">iq</span>&gt;</span>
</code></pre>
<p>Prosody -&gt; Reservation system:</p>
<pre><code class="hljs">POST /conference HTTP/<span class="hljs-number">1.1</span>
content-type:application/x-www-form-urlencoded;charset=utf<span class="hljs-number">-8</span>
host: http:<span class="hljs-comment">//reservation.example.com</span>
content-length: length

name=testroom1&amp;start_time=<span class="hljs-number">2048</span><span class="hljs-number">-04</span><span class="hljs-number">-20</span>T17%<span class="hljs-number">3</span>A55%<span class="hljs-number">3</span>A12<span class="hljs-number">.000</span>Z&amp;mail_owner=client1%<span class="hljs-number">40</span>xmpp.com
</code></pre>
<p>Reservation system -&gt; Prosody:</p>
<pre><code class="hljs">HTTP/1.1 <span class="hljs-number">403</span> Forbidden
<span class="hljs-attribute">Content-Type</span>: application/json; charset=utf-8
<span class="hljs-attribute">Content-Length</span>: length

<span class="ada">{
  <span class="hljs-symbol">'message</span>': <span class="hljs-symbol">'client1</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> allowed to create the room <span class="hljs-keyword">at</span> this time'
}
</span></code></pre>
<p>Prosody -&gt; Client:</p>
<pre><code class="hljs">&lt;iq from=<span class="hljs-symbol">'jicofo</span>.meet.com' <span class="hljs-keyword">to</span>=<span class="hljs-symbol">'client1</span>@xmpp.com' <span class="hljs-keyword">type</span>=<span class="hljs-symbol">'error</span>'&gt;
  &lt;<span class="hljs-literal">error</span> <span class="hljs-keyword">type</span>=<span class="hljs-symbol">'cancel</span>'&gt;
    &lt;service-unavailable xmlns=<span class="hljs-symbol">'urn</span>:ietf:params:xml:ns:xmpp-stanzas' /&gt;
    &lt;<span class="hljs-literal">text</span> xmlns=<span class="hljs-symbol">'urn</span>:ietf:params:xml:ns:xmpp-stanzas'&gt;
          client1 <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> allowed <span class="hljs-keyword">to</span> create the room at this <span class="hljs-built_in">time</span>
    &lt;/<span class="hljs-literal">text</span>&gt;
    &lt;reservation-<span class="hljs-literal">error</span> xmlns=<span class="hljs-symbol">'http</span>://jitsi.org/protocol/focus' <span class="hljs-literal">error</span>-code='<span class="hljs-number">403</span>'/&gt;
  &lt;/<span class="hljs-literal">error</span>&gt;
&lt;/iq&gt;
</code></pre>
<p>Application can use <code>text</code> and <code>reservation-error</code> elements to
provide meaningful information to the user.</p>
<h5><a class="anchor" aria-hidden="true" id="reading-conference-info"></a><a href="#reading-conference-info" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reading conference info</h5>
<p>In case of <code>409</code> response to <code>HTTP POST</code> request Prosody will try
to read information about conflicting conference using <code>HTTP GET</code>
request to '/conference/{conflict_id}' endpoint. The response should provide all
information about the conference stored in the reservation system:</p>
<ul>
<li><code>'id'</code>: conference identifier assigned by the reservation system</li>
<li><code>'name'</code>: conference room name</li>
<li><code>'mail_owner'</code>: identity of the user who has created the conference</li>
<li><code>'start_time'</code>: conference start date and time</li>
<li><code>'duration'</code>: scheduled conference duration in seconds</li>
</ul>
<p>Sample response JSON body(contains the same info as <code>200 OK</code> to
<code>HTTP POST</code>):</p>
<pre><code class="hljs">{
  'id': <span class="hljs-number">364758328</span>,
  'name': 'conference<span class="hljs-number">1234</span>',
  'mail_owner': 'user@server.com',
  'start_time': '<span class="hljs-number">2048-04-20</span>T17:55:12.000Z',
  'duration': <span class="hljs-number">900000</span>
}
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="deleting-conference"></a><a href="#deleting-conference" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deleting conference</h5>
<p>Prosody deletes conferences in the reservation system in two cases. First when
all users leave XMPP Multi User Chat room. Second when conference duration limit
is exceeded. In the latter case Prosody will destroy XMPP MUC room.
After MUC room is destroyed Prosody sends <code>HTTP DELETE</code> request to
<code>'/conference/{id}'</code> endpoint where <code>{id}</code> is replaced with
conference identifier assigned by the reservation system.</p>
<pre><code class="hljs">DELETE <span class="hljs-regexp">/conference/</span><span class="hljs-number">364758328</span> HTTP/<span class="hljs-number">1.1</span>
<span class="hljs-string">host:</span> <span class="hljs-string">http:</span><span class="hljs-comment">//reservation.example.com</span>
...
</code></pre>
<p><img src="https://raw.githubusercontent.com/jitsi/handbook/master/docs/assets/reservation-api.png" alt=""></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/24/2021</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/handbook/docs/devops-guide/devops-guide-scalable"><span class="arrow-prev">← </span><span>Scalable setup</span></a><a class="docs-next button" href="/handbook/docs/devops-guide/turn"><span>TURN setup</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/handbook/" class="nav-home"><img src="/handbook/img/logo-white.png" alt="Jitsi Meet Handbook" width="66" height="58"/></a><div><h5>Docs</h5><a href="/handbook/docs/intro.html">Introduction</a><a href="/handbook/docs/user-guide/user-guide-start.html">User Guide</a><a href="/handbook/docs/dev-guide/dev-guide-start.html">Developer Guide</a><a href="/handbook/docs/devops-guide/devops-guide-start.html">Self-Hosting Guide</a></div><div><h5>Community</h5><a href="https://community.jitsi.org" target="_blank" rel="noreferrer noopener">Project Forum</a></div><div><h5>More</h5><a href="https://github.com/jitsi/jitsi-meet" target="_blank" rel="noreferrer noopener">Jitsi Meet on GitHub</a><a class="github-button" href="https://github.com/jitsi/jitsi-meet" data-icon="octicon-star" data-count-href="/jitsi/jitsi-meet/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="https://github.com/jitsi/handbook" target="_blank" rel="noreferrer noopener">Handbook on GitHub</a><div class="social"><a href="https://twitter.com/jitsinews" class="twitter-follow-button">Follow @jitsinews</a></div></div></section><section class="copyright">Copyright © 2021</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>